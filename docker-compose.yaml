services:
  anytype:
    image: ghcr.io/wellcaffeinated/anytype-docker:latest
    container_name: anytype
    ports:
      - "31009:31009"  # HTTP API
      - "31010:31010"  # gRPC
      - "31011:31011"  # gRPC-Web
    environment:
      ANYTYPE_LOG_LEVEL: INFO
      DATA_PATH: /home/anytype/.anytype/data
      ANYTYPE_LISTEN_ADDRESS: 0.0.0.0:31009
      ANYTYPE_BOT_NAME: my-anytype-bot  # Auto-creates credentials on first run
    volumes:
      # Persist anytype data
      - anytype-data:/home/anytype
    healthcheck:
      test: ["CMD", "nc", "-z", "0.0.0.0", "31009"]
      interval: 10s
      timeout: 5s
      retries: 3
      start_period: 30s
    restart: unless-stopped

volumes:
  anytype-data:
    driver: local
