services:
  anytype:
    build: .
    image: anytype:latest
    container_name: anytype
    ports:
      - "31010:31010"  # gRPC
      - "31011:31011"  # gRPC-Web
      # Remap back to 31009 for anytype-mcp
      - "31009:31012"  # HTTP API (main)
    environment:
      ANYTYPE_LOG_LEVEL: INFO
      DATA_PATH: /anytype
      ANYTYPE_LISTEN_ADDRESS: 0.0.0.0:31012
      ANYTYPE_BOT_NAME: blah  # Auto-creates credentials on first run
    volumes:
      # Secret key gets stored here
      - .anytype:/home/anytype/.anytype
      # Persist anytype data
      - anytype-data:/anytype
    restart: unless-stopped

volumes:
  anytype-data:
    driver: local
